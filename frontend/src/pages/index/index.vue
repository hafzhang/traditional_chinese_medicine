<template>
  <view class="page-container">
    <!-- å¤´éƒ¨ Hero åŒºåŸŸ -->
    <view class="hero-section">
      <view class="hero-bg"></view>
      <view class="hero-content">
        <view class="hero-icon">ğŸ©º</view>
        <view class="hero-title">ä¸­åŒ»ä½“è´¨è¯†åˆ«</view>
        <view class="hero-subtitle">åŸºäºç‹ç¦é™¢å£« CCMQ æ ‡å‡†é‡è¡¨</view>

        <view class="hero-actions">
          <button class="btn btn-primary btn-large btn-block" @click="startTest">
            <text class="btn-icon">ğŸ¯</text>
            <text>å¼€å§‹ä½“è´¨æµ‹è¯•</text>
          </button>
        </view>
      </view>
    </view>

    <!-- åŠŸèƒ½å¯¼èˆªåŒºåŸŸ -->
    <view class="features-section">
      <view class="section-header">
        <text class="section-title">åŠŸèƒ½å¯¼èˆª</text>
        <text class="section-desc">æ ¸å¿ƒåŠŸèƒ½ - ä¸€é”®ç›´è¾¾</text>
      </view>

      <view class="features-grid">
        <view
          v-for="item in features"
          :key="item.id"
          class="feature-card"
          @click="navigateTo(item.path, item.isTabBar)"
        >
          <view class="feature-icon-wrapper" :style="{ background: item.gradient }">
            <text class="feature-icon">{{ item.icon }}</text>
          </view>
          <view class="feature-info">
            <view class="feature-title">{{ item.title }}</view>
            <view class="feature-desc">{{ item.desc }}</view>
          </view>
          <view class="feature-action">
            <text class="action-text">{{ item.actionText }}</text>
            <text class="action-arrow">â†’</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨ä¿¡æ¯åŒºåŸŸ -->
    <view class="footer-section">
      <view class="footer-item">
        <text class="footer-icon">ğŸ“</text>
        <view class="footer-info">
          <view class="footer-title">ç‹ç¦é™¢å£« CCMQ æ ‡å‡†</view>
          <view class="footer-desc">å›½å®¶ä¸­åŒ»è¯ç®¡ç†å±€æ¨å¹¿æ ‡å‡†</view>
        </view>
      </view>
      <view class="footer-item">
        <text class="footer-icon">ğŸ”¬</text>
        <view class="footer-info">
          <view class="footer-title">ç§‘å­¦æƒå¨</view>
          <view class="footer-desc">åŸºäºå¤§æ ·æœ¬æµè¡Œç—…å­¦è°ƒæŸ¥</view>
        </view>
      </view>
    </view>
  </view>
</template>

<script setup>
import { ref } from 'vue'

// åŠŸèƒ½åˆ—è¡¨
const features = ref([
  {
    id: 1,
    icon: 'ğŸ“‹',
    title: 'ä½“è´¨æµ‹è¯•',
    desc: '30é“ç§‘å­¦é—®é¢˜ï¼Œç²¾å‡†è¯†åˆ«æ‚¨çš„ä½“è´¨ç±»å‹',
    gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
    actionText: 'ç«‹å³æµ‹è¯•',
    path: '/pages/test/test',
    isTabBar: true
  },
  {
    id: 2,
    icon: 'ğŸ¥¬',
    title: 'é£Ÿæåº“',
    desc: 'åŸºäºä½“è´¨æ¨èçš„å¥åº·é£Ÿæï¼Œäº†è§£æ€§å‘³å½’ç»',
    gradient: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
    actionText: 'æŸ¥çœ‹é£Ÿæ',
    path: '/pages/ingredients/list',
    isTabBar: false
  },
  {
    id: 3,
    icon: 'ğŸ²',
    title: 'é£Ÿè°±åº“',
    desc: 'æ ¹æ®ä½“è´¨æ¨èçš„å…»ç”Ÿé£Ÿè°±å’Œé£Ÿç–—æ–¹æ¡ˆ',
    gradient: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
    actionText: 'æŸ¥çœ‹é£Ÿè°±',
    path: '/pages/recipes/list',
    isTabBar: false
  },
  {
    id: 4,
    icon: 'ğŸ“',
    title: 'ç©´ä½æŸ¥æ‰¾',
    desc: 'æŒ‰ç—‡çŠ¶/éƒ¨ä½/ç»ç»œæŸ¥æ‰¾ç©´ä½ï¼ŒæŒ‰æ‘©è°ƒç†',
    gradient: 'linear-gradient(135deg, #30cfd0 0%, #330867 100%)',
    actionText: 'å¼€å§‹æŸ¥æ‰¾',
    path: '/pages/acupoints/list',
    isTabBar: false
  },
  {
    id: 5,
    icon: 'ğŸ‘…',
    title: 'AIèˆŒè¯Š',
    desc: 'é€šè¿‡èˆŒè±¡åˆ†æä½“è´¨å€¾å‘ï¼Œæ™ºèƒ½å¥åº·è¯„ä¼°',
    gradient: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
    actionText: 'å¼€å§‹è¯Šæ–­',
    path: '/pages/tongue/index',
    isTabBar: false
  },
  {
    id: 6,
    icon: 'ğŸ“š',
    title: 'å…»ç”Ÿè¯¾ç¨‹',
    desc: 'æ ¹æ®ä½“è´¨æ¨èçš„å¥åº·å…»ç”Ÿè¯¾ç¨‹',
    gradient: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)',
    actionText: 'æµè§ˆè¯¾ç¨‹',
    path: '/pages/courses/list',
    isTabBar: false
  }
])

/**
 * å¼€å§‹ä½“è´¨æµ‹è¯•
 */
function startTest() {
  uni.switchTab({
    url: '/pages/test/test'
  })
}

/**
 * é¡µé¢å¯¼èˆª
 */
function navigateTo(path, isTabBar) {
  if (isTabBar) {
    uni.switchTab({
      url: path,
      fail: () => {
        console.log('switchTab failed, trying navigateTo')
        uni.navigateTo({ url: path })
      }
    })
  } else {
    uni.navigateTo({
      url: path,
      fail: (err) => {
        console.error('å¯¼èˆªå¤±è´¥:', err)
        uni.showToast({
          title: 'é¡µé¢å¼€å‘ä¸­',
          icon: 'none'
        })
      }
    })
  }
}
</script>

<style lang="scss" scoped>
.page-container {
  min-height: 100vh;
  background: #f5f5f5;
}

/* Hero åŒºåŸŸ */
.hero-section {
  position: relative;
  padding: 60rpx 30rpx 50rpx;
  overflow: hidden;
}

.hero-bg {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-bottom-left-radius: 40rpx;
  border-bottom-right-radius: 40rpx;
}

.hero-content {
  position: relative;
  z-index: 1;
  text-align: center;
  color: #fff;
}

.hero-icon {
  font-size: 100rpx;
  margin-bottom: 20rpx;
  opacity: 0.95;
}

.hero-title {
  font-size: 48rpx;
  font-weight: 700;
  margin-bottom: 16rpx;
  letter-spacing: 2rpx;
}

.hero-subtitle {
  font-size: 28rpx;
  opacity: 0.9;
  margin-bottom: 30rpx;
}

.hero-actions {
  display: flex;
  justify-content: center;
}

/* åŠŸèƒ½å¯¼èˆªåŒºåŸŸ */
.features-section {
  padding: 40rpx 30rpx;
}

.section-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 30rpx;
}

.section-title {
  font-size: 36rpx;
  font-weight: 700;
  color: #1a1a1a;
  margin-bottom: 8rpx;
}

.section-desc {
  font-size: 24rpx;
  color: #999;
}

/* åŠŸèƒ½ç½‘æ ¼ */
.features-grid {
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

.feature-card {
  display: flex;
  align-items: center;
  background: #fff;
  border-radius: 20rpx;
  padding: 28rpx 24rpx;
  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
}

.feature-card:active {
  transform: scale(0.98);
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.12);
}

.feature-icon-wrapper {
  width: 88rpx;
  height: 88rpx;
  border-radius: 16rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-right: 20rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.15);
}

.feature-icon {
  font-size: 44rpx;
}

.feature-info {
  flex: 1;
  min-width: 0;
}

.feature-title {
  font-size: 32rpx;
  font-weight: 600;
  color: #1a1a1a;
  margin-bottom: 8rpx;
}

.feature-desc {
  font-size: 24rpx;
  color: #666;
  line-height: 1.5;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.feature-action {
  display: flex;
  align-items: center;
  gap: 8rpx;
  flex-shrink: 0;
  margin-left: 12rpx;
}

.action-text {
  font-size: 24rpx;
  color: #667eea;
  font-weight: 500;
}

.action-arrow {
  font-size: 32rpx;
  color: #667eea;
  font-weight: 300;
}

/* åº•éƒ¨ä¿¡æ¯åŒºåŸŸ */
.footer-section {
  padding: 0 30rpx 40rpx;
  display: flex;
  flex-direction: column;
  gap: 16rpx;
}

.footer-item {
  display: flex;
  align-items: center;
  gap: 16rpx;
  background: #fff;
  padding: 24rpx;
  border-radius: 16rpx;
  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.06);
}

.footer-icon {
  font-size: 36rpx;
  flex-shrink: 0;
}

.footer-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6rpx;
}

.footer-title {
  font-size: 28rpx;
  font-weight: 600;
  color: #1a1a1a;
}

.footer-desc {
  font-size: 24rpx;
  color: #999;
}

/* æŒ‰é’®æ ·å¼ */
.btn {
  border: none;
  border-radius: 50rpx;
  padding: 28rpx 48rpx;
  font-size: 32rpx;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.btn-primary {
  background: #fff;
  color: #667eea;
  box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);
}

.btn-primary:active {
  transform: scale(0.95);
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.2);
}

.btn-large {
  padding: 32rpx 64rpx;
  font-size: 32rpx;
}

.btn-block {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12rpx;
  min-width: 400rpx;
}

.btn-icon {
  font-size: 32rpx;
}
</style>
